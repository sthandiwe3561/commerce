

 {% if comments %}
        <ul>
            {% for comment in comments %}
                <li>
                    <strong>{{ comment.user.username }}</strong> 
                    ({{ comment.timestamp|date:"d M Y, H:i" }}):
                    <p>{{ comment.content }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No comments yet. Be the first to comment!</p>
    {% endif %}

    <!-- Comment Form (Visible only for logged-in users) -->
{% if user.is_authenticated %}
<form method="POST" action="{% url 'add_comment' product.id %}">
  {% csrf_token %}
  <textarea
    name="content"
    rows="4"
    placeholder="Add a comment..."
    required
  ></textarea>
  <button type="submit">Submit</button>
</form>
{% else %}
<p>You must be logged in to comment.</p>
{% endif %}
  </div>


def comments(request, product_id):
    product = get_list_or_404(Product, pk=product_id)
    comments = Comment.objects.filter(product=product)

    return render(request, "auctions/index",{
        "product": product,
        "comments": comments,
    })
 
    path("product/<int:product_id>/comments/", views.comments, name="comments"),
    <a href="{% url 'comments' product.id %}">Comments</a>
